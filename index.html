<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teileliste BMW E61</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #f4f4f4;
}

header {
  background: #111;
  color: #fff;
  padding: 20px;
  text-align: center;
}

.container {
  padding: 15px;
}

input, select, button {
  width: 100%;
  padding: 12px;
  margin-bottom: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 16px;
}

button {
  background: #3b82f6;
  color: white;
  border: none;
}

.part {
  background: #3b82f6;
  color: white;
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 12px;
  position: relative;
  cursor: pointer;
}

.part h3 {
  margin: 0;
}

.part small {
  opacity: 0.8;
}

.star {
  position: absolute;
  right: 15px;
  top: 18px;
  font-size: 20px;
  color: gold;
}

.details {
  background: rgba(255,255,255,0.15);
  padding: 10px;
  border-radius: 8px;
  margin-top: 10px;
  display: none;
}

.details div {
  margin-bottom: 5px;
}

.add-box {
  background: white;
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 15px;
}
</style>
</head>

<body>

<header>
  <h1>Teileliste</h1>
  <p>Suche, filtere oder füge neue Teile hinzu</p>
</header>

<div class="container">

  <!-- Suche -->
  <input type="text" id="searchInput" placeholder="Teil suchen..." oninput="renderParts()">

  <!-- Kategorie -->
  <select id="categoryFilter" onchange="renderParts()">
    <option value="">Alle Kategorien</option>
    <option value="Motor">Motor</option>
    <option value="Getriebe">Getriebe</option>
    <option value="Elektrik">Elektrik</option>
    <option value="Karosserie">Karosserie</option>
    <option value="Fahrwerk">Fahrwerk</option>
    <option value="Innenraum">Innenraum</option>
  </select>

  <!-- Teil hinzufügen -->
  <div class="add-box">
    <h3>Teil hinzufügen</h3>
    <input id="newName" placeholder="Teilname">
    <input id="newCategory" placeholder="Kategorie">
    <input id="newOEM" placeholder="OEM Nummer">
    <input id="newDesc" placeholder="Beschreibung">
    <button onclick="addPart()">Hinzufügen</button>
  </div>

  <!-- Teileliste -->
  <div id="partsList"></div>

</div>

<script>
let parts = JSON.parse(localStorage.getItem("parts")) || [
  {id:1,name:"Zylinderkopf",category:"Motor",oem:"11127806100",desc:"M57 Diesel Zylinderkopf",status:"OK",fav:false},
  {id:2,name:"Turbolader",category:"Motor",oem:"11657802588",desc:"Abgasturbolader",status:"OK",fav:false},
  {id:3,name:"Wasserpumpe",category:"Motor",oem:"11517788826",desc:"Kühlmittelpumpe",status:"OK",fav:false},
  {id:4,name:"Bremscheibe VA",category:"Fahrwerk",oem:"34116864058",desc:"Belüftete Bremsscheibe vorne",status:"OK",fav:false},
  {id:5,name:"Injektor",category:"Motor",oem:"13537805430",desc:"Common-Rail Injektor",status:"OK",fav:false},
  {id:6,name:"Kardanwelle",category:"Getriebe",oem:"26107570956",desc:"xDrive Kardanwelle",status:"OK",fav:false},
  {id:7,name:"Rücklicht",category:"Karosserie",oem:"63217160793",desc:"Rückleuchte rechts",status:"OK",fav:false},
  {id:8,name:"Batterie",category:"Elektrik",oem:"61217586967",desc:"Starterbatterie",status:"OK",fav:false}
];

function save() {
  localStorage.setItem("parts", JSON.stringify(parts));
}

function toggleDetails(id) {
  const el = document.getElementById("details-"+id);
  el.style.display = el.style.display === "none" ? "block" : "none";
}

function toggleFav(id) {
  const p = parts.find(x => x.id === id);
  p.fav = !p.fav;
  save();
  renderParts();
}

function addPart() {
  const name = newName.value.trim();
  const cat = newCategory.value.trim();
  const oem = newOEM.value.trim();
  const desc = newDesc.value.trim();
  if(!name || !cat) return alert("Name & Kategorie erforderlich");

  parts.push({
    id: Date.now(),
    name,
    category: cat,
    oem,
    desc,
    status: "OK",
    fav: false
  });

  newName.value = "";
  newCategory.value = "";
  newOEM.value = "";
  newDesc.value = "";

  save();
  renderParts();
}

function renderParts() {
  const search = searchInput.value.toLowerCase();
  const cat = categoryFilter.value;

  partsList.innerHTML = "";

  parts
    .filter(p => 
      p.name.toLowerCase().includes(search) &&
      (cat === "" || p.category === cat)
    )
    .forEach(p => {
      partsList.innerHTML += `
        <div class="part" onclick="toggleDetails(${p.id})">
          <h3>${p.name}</h3>
          <small>${p.category}</small><br>
          <small>Status: ${p.status}</small>

          <div class="star" onclick="event.stopPropagation();toggleFav(${p.id})">
            ${p.fav ? "★" : "☆"}
          </div>

          <div class="details" id="details-${p.id}">
            <div><b>OEM:</b> ${p.oem || "-"}</div>
            <div><b>Beschreibung:</b> ${p.desc || "-"}</div>
          </div>
        </div>
      `;
    });
}

renderParts();
</script>

</body>
</html>
